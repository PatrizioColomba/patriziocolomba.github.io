(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2215:(e,t,n)=>{Promise.resolve().then(n.bind(n,6325))},6325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var o=n(5155),r=n(9020),a=n(3315),s=n(7959),i=n(5712),l=n(5188),c=n(4563),d=n(2115);function p(e){let{children:t}=e,n=(0,i.A)("(prefers-color-scheme: dark)"),r=(0,l.A)({typography:{fontFamily:"Space Mono, Roboto"},palette:{mode:n?"dark":"light"}});return(0,o.jsxs)(s.a,{theme:r,children:[(0,o.jsx)(c.Ay,{}),t]})}var h=n(1796),f=n(4049);function u(){return(0,o.jsx)(f.A,{sx:{display:"flex"},children:(0,o.jsx)(h.A,{})})}var m=n(8563),y=n(3013),g=n(2683),x=n(426);function S(){let e="f120ed059de96ad5a678443f3f8dfffa64f7df0a";return(0,o.jsxs)(f.A,{sx:{position:"fixed",bottom:16,left:16,zIndex:1e3,display:"flex",alignItems:"center",gap:2},children:[(0,o.jsx)(y.A,{title:"PGP Signature",arrow:!0,children:(0,o.jsx)(g.A,{href:"https://keys.openpgp.org/vks/v1/by-fingerprint/248097092B458509C508DAC0350585C4E9518F26",target:"_blank",rel:"noopener noreferrer",sx:{display:"flex",alignItems:"center",color:"text.secondary",opacity:.5,transition:"opacity 0.2s","&:hover":{opacity:1}},children:(0,o.jsx)(x.A,{fontSize:"small"})})}),(0,o.jsx)(g.A,{href:"https://github.com/PatrizioColomba/patriziocolomba.github.io/commit/".concat(e),target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",display:"flex",alignItems:"center"},children:(0,o.jsx)(a.A,{variant:"caption",sx:{color:"text.secondary",opacity:.5,transition:"opacity 0.2s",fontFamily:"Space Mono, monospace",fontSize:"0.7rem","&:hover":{opacity:1}},children:e})})]})}async function b(e,t){return await new Promise((n,o)=>{let r=new EventSource("https://mcp-deploy-test.azurewebsites.net/sse"),a=setTimeout(()=>{r.close(),o(Error("MCP connection timeout"))},1e4),s=null;r.addEventListener("endpoint",async e=>{console.log("SSE endpoint event:",e.data),s=e.data;try{await fetch("https://mcp-deploy-test.azurewebsites.net".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:0,method:"initialize",params:{protocolVersion:"2024-11-05",capabilities:{},clientInfo:{name:"web-client",version:"1.0.0"}}})})}catch(e){console.error("Failed to initialize:",e),clearTimeout(a),r.close(),o(e)}}),r.addEventListener("message",async i=>{console.log("SSE message event:",i.data);try{let l=JSON.parse(i.data);if(console.log("Parsed MCP message:",l),l.error){console.error("MCP error:",l.error),clearTimeout(a),r.close(),o(Error("MCP error: ".concat(l.error.message)));return}if(0===l.id&&l.result){console.log("Initialized successfully, sending tool call..."),await fetch("https://mcp-deploy-test.azurewebsites.net".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"notifications/initialized"})}),await fetch("https://mcp-deploy-test.azurewebsites.net".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"tools/call",params:{name:e,arguments:t}})});return}1===l.id&&l.result&&(clearTimeout(a),r.close(),n(l))}catch(e){console.warn("Failed to parse SSE message:",i.data,e)}}),r.onerror=e=>{console.error("SSE connection error:",e),clearTimeout(a),r.close(),o(Error("SSE connection failed"))},r.onopen=()=>{console.log("SSE connection opened")}})}function j(){var e;let[t,n]=(0,d.useState)([]),[s,i]=(0,d.useState)(!1),[l,c]=(0,d.useState)(null);async function h(){try{var e,t,n;let o=await b("say_hello",{});return[{data:(null==(n=o.result)||null==(t=n.content)||null==(e=t[0])?void 0:e.text)||JSON.stringify(o,null,2)}]}catch(e){return console.warn("MCP server not reachable, falling back to backend:",e),await f()}}async function f(){let e="https://patriziocolomba-web-app.azurewebsites.net";if(!e)throw Error("Something went wrong. Please try again later.");let t=await fetch("".concat(e,"/Test"));return await t.json()}return(0,d.useEffect)(()=>{l&&c(null),i(!0),h().then(n).catch(c).finally(()=>i(!1))},[]),(0,o.jsx)(p,{children:(0,o.jsxs)("main",{children:[(0,o.jsxs)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:[s&&(0,o.jsx)(u,{}),!s&&!l&&t.map((e,t)=>(0,o.jsx)(a.A,{children:e.data},t)),!s&&l&&(e=l.message,(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"red"},children:[(0,o.jsx)(m.A,{style:{marginRight:"8px"}}),(0,o.jsx)("span",{children:e})]}))]}),(0,o.jsx)(S,{})]})})}}},e=>{e.O(0,[369,441,255,358],()=>e(e.s=2215)),_N_E=e.O()}]);